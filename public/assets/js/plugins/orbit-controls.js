THREE.OrbitControls=function(e,k){this.object=e,this.domElement=void 0!==k?k:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return E.phi},this.getAzimuthalAngle=function(){return E.theta},this.setPolarAngle=function(e){E.phi=e,this.forceUpdate()},this.setAzimuthalAngle=function(e){E.theta=e,this.forceUpdate()},this.saveState=function(){h.target0.copy(h.target),h.position0.copy(h.object.position),h.zoom0=h.object.zoom},this.reset=function(){h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),h.dispatchEvent(z),h.update(),d=p.NONE},this.forceUpdate=(n=new THREE.Vector3,o=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),V=o.clone().inverse(),a=new THREE.Vector3,i=new THREE.Quaternion,function(){var e=this.object.position,t=(n.copy(e).sub(this.target),n.applyQuaternion(o),E.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,E.theta)),E.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,E.phi)),E.phi=Math.max(u,Math.min(Math.PI-u,E.phi)),n.length()*g),t=Math.max(this.minDistance,Math.min(this.maxDistance,t));return this.target.add(T),n.x=t*Math.sin(E.phi)*Math.sin(E.theta),n.y=t*Math.cos(E.phi),n.z=t*Math.sin(E.phi)*Math.cos(E.theta),n.applyQuaternion(V),e.copy(this.target).add(n),this.object.lookAt(this.target),!0===this.enableDamping?(E.thetaDelta*=1-this.dampingFactor,E.phiDelta*=1-this.dampingFactor):(E.thetaDelta=0,E.phiDelta=0),g=1,T.set(0,0,0),!(!(y||a.distanceToSquared(this.object.position)>u||8*(1-i.dot(this.object.quaternion))>u)||(a.copy(this.object.position),i.copy(this.object.quaternion),y=!1))}),this.update=(t=new THREE.Vector3,s=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),U=s.clone().inverse(),r=new THREE.Vector3,c=new THREE.Quaternion,function(){var e=h.object.position;return t.copy(e).sub(h.target),t.applyQuaternion(s),E.setFromVector3(t),h.autoRotate&&d===p.NONE&&L(2*Math.PI/60/60*h.autoRotateSpeed),E.theta+=b.theta,E.phi+=b.phi,E.theta=Math.max(h.minAzimuthAngle,Math.min(h.maxAzimuthAngle,E.theta)),E.phi=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,E.phi)),E.makeSafe(),E.radius*=g,E.radius=Math.max(h.minDistance,Math.min(h.maxDistance,E.radius)),h.target.add(T),t.setFromSpherical(E),t.applyQuaternion(U),e.copy(h.target).add(t),h.object.lookAt(h.target),!0===h.enableDamping?(b.theta*=1-h.dampingFactor,b.phi*=1-h.dampingFactor,T.multiplyScalar(1-h.dampingFactor)):(b.set(0,0,0),T.set(0,0,0)),g=1,!(!(y||r.distanceToSquared(h.object.position)>u||8*(1-c.dot(h.object.quaternion))>u)||(h.dispatchEvent(z),r.copy(h.object.position),c.copy(h.object.quaternion),y=!1))}),this.dispose=function(){h.domElement.removeEventListener("contextmenu",$,!1),h.domElement.removeEventListener("mousedown",K,!1),h.domElement.removeEventListener("wheel",G,!1),h.domElement.removeEventListener("touchstart",B,!1),h.domElement.removeEventListener("touchend",J,!1),h.domElement.removeEventListener("touchmove",W,!1),document.removeEventListener("mousemove",_,!1),document.removeEventListener("mouseup",q,!1),window.removeEventListener("keydown",Q,!1)};var n,o,V,a,i,t,s,U,r,c,h=this,z={type:"change"},m={type:"start"},l={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},d=p.NONE,u=1e-6,E=new THREE.Spherical,b=new THREE.Spherical,g=1,T=new THREE.Vector3,y=!1,R=new THREE.Vector2,v=new THREE.Vector2,f=new THREE.Vector2,H=new THREE.Vector2,O=new THREE.Vector2,w=new THREE.Vector2,P=new THREE.Vector2,j=new THREE.Vector2,M=new THREE.Vector2;function A(){return Math.pow(.95,h.zoomSpeed)}function L(e){b.theta-=e}function F(e){b.phi-=e}D=new THREE.Vector3;var D,x,C,Y=function(e,t){D.setFromMatrixColumn(t,0),D.multiplyScalar(-e),T.add(D)},Z=(x=new THREE.Vector3,function(e,t){!0===h.screenSpacePanning?x.setFromMatrixColumn(t,1):(x.setFromMatrixColumn(t,0),x.crossVectors(h.object.up,x)),x.multiplyScalar(e),T.add(x)}),N=(C=new THREE.Vector3,function(e,t){var n,o=h.domElement===document?h.domElement.body:h.domElement;h.object.isPerspectiveCamera?(n=h.object.position,C.copy(n).sub(h.target),n=C.length(),n*=Math.tan(h.object.fov/2*Math.PI/180),Y(2*e*n/o.clientHeight,h.object.matrix),Z(2*t*n/o.clientHeight,h.object.matrix)):h.object.isOrthographicCamera?(Y(e*(h.object.right-h.object.left)/h.object.zoom/o.clientWidth,h.object.matrix),Z(t*(h.object.top-h.object.bottom)/h.object.zoom/o.clientHeight,h.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),h.enablePan=!1)});function S(e){h.object.isPerspectiveCamera?g/=e:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom*e)),h.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function I(e){h.object.isPerspectiveCamera?g*=e:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom/e)),h.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function X(e){H.set(e.clientX,e.clientY)}function K(e){if(!1!==h.enabled){switch(e.preventDefault(),e.button){case h.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===h.enablePan)return;X(e),d=p.PAN}else{if(!1===h.enableRotate)return;R.set(e.clientX,e.clientY),d=p.ROTATE}break;case h.mouseButtons.MIDDLE:if(!1===h.enableZoom)return;P.set(e.clientX,e.clientY),d=p.DOLLY;break;case h.mouseButtons.RIGHT:if(!1===h.enablePan)return;X(e),d=p.PAN}d!==p.NONE&&(document.addEventListener("mousemove",_,!1),document.addEventListener("mouseup",q,!1),h.dispatchEvent(m))}}function _(e){var t;if(!1!==h.enabled)switch(e.preventDefault(),d){case p.ROTATE:!1!==h.enableRotate&&(t=e,v.set(t.clientX,t.clientY),f.subVectors(v,R).multiplyScalar(h.rotateSpeed),t=h.domElement===document?h.domElement.body:h.domElement,L(2*Math.PI*f.x/t.clientHeight),F(2*Math.PI*f.y/t.clientHeight),R.copy(v),h.update());break;case p.DOLLY:!1!==h.enableZoom&&(j.set(e.clientX,e.clientY),M.subVectors(j,P),0<M.y?S(A()):M.y<0&&I(A()),P.copy(j),h.update());break;case p.PAN:!1!==h.enablePan&&(O.set(e.clientX,e.clientY),w.subVectors(O,H).multiplyScalar(h.panSpeed),N(w.x,w.y),H.copy(O),h.update())}}function q(e){!1!==h.enabled&&(document.removeEventListener("mousemove",_,!1),document.removeEventListener("mouseup",q,!1),h.dispatchEvent(l),d=p.NONE)}function G(e){!1===h.enabled||!1===h.enableZoom||d!==p.NONE&&d!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),h.dispatchEvent(m),(e=e).deltaY<0?I(A()):0<e.deltaY&&S(A()),h.update(),h.dispatchEvent(l))}function Q(e){if(!1!==h.enabled&&!1!==h.enableKeys&&!1!==h.enablePan)switch(e.keyCode){case h.keys.UP:N(0,h.keyPanSpeed),h.update();break;case h.keys.BOTTOM:N(0,-h.keyPanSpeed),h.update();break;case h.keys.LEFT:N(h.keyPanSpeed,0),h.update();break;case h.keys.RIGHT:N(-h.keyPanSpeed,0),h.update()}}function B(e){if(!1!==h.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===h.enableRotate)return;R.set(e.touches[0].pageX,e.touches[0].pageY),d=p.TOUCH_ROTATE;break;case 2:if(!1===h.enableZoom&&!1===h.enablePan)return;t=e,h.enableZoom&&(o=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(o*o+n*n),P.set(0,o)),h.enablePan&&(n=.5*(t.touches[0].pageX+t.touches[1].pageX),o=.5*(t.touches[0].pageY+t.touches[1].pageY),H.set(n,o)),d=p.TOUCH_DOLLY_PAN;break;default:d=p.NONE}var t,n,o;d!==p.NONE&&h.dispatchEvent(m)}}function W(e){var t,n,o;if(!1!==h.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:!1!==h.enableRotate&&d===p.TOUCH_ROTATE&&(o=e,v.set(o.touches[0].pageX,o.touches[0].pageY),f.subVectors(v,R).multiplyScalar(h.rotateSpeed),o=h.domElement===document?h.domElement.body:h.domElement,L(2*Math.PI*f.x/o.clientHeight),F(2*Math.PI*f.y/o.clientHeight),R.copy(v),h.update());break;case 2:!1===h.enableZoom&&!1===h.enablePan||d===p.TOUCH_DOLLY_PAN&&(o=e,h.enableZoom&&(n=o.touches[0].pageX-o.touches[1].pageX,t=o.touches[0].pageY-o.touches[1].pageY,n=Math.sqrt(n*n+t*t),j.set(0,n),M.set(0,Math.pow(j.y/P.y,h.zoomSpeed)),S(M.y),P.copy(j)),h.enablePan&&(t=.5*(o.touches[0].pageX+o.touches[1].pageX),n=.5*(o.touches[0].pageY+o.touches[1].pageY),O.set(t,n),w.subVectors(O,H).multiplyScalar(h.panSpeed),N(w.x,w.y),H.copy(O)),h.update());break;default:d=p.NONE}}function J(e){!1!==h.enabled&&(h.dispatchEvent(l),d=p.NONE)}function $(e){!1!==h.enabled&&e.preventDefault()}h.domElement.addEventListener("contextmenu",$,!1),h.domElement.addEventListener("mousedown",K,!1),h.domElement.addEventListener("wheel",G,!1),h.domElement.addEventListener("touchstart",B,!1),h.domElement.addEventListener("touchend",J,!1),h.domElement.addEventListener("touchmove",W,!1),window.addEventListener("keydown",Q,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});